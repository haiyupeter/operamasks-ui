(function(){var e="om-tabs-"+(((1+Math.random())*65536)|0).toString(16).substring(1)+"-",q=0;function n(C,B){if(B.content){$(C).text(B.content)}$(C).omPanel(B);return C}function k(B){var C=$(B).find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all"></div>').parent().parent();C.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom"></div>');return C}function p(C){var D=$.data(C,"omtabs").options;var B=[];$(C).find(">div.om-tabs-headers a").each(function(){var F=this.getAttribute("href",2);var J=F.split("#")[0],L;if(J&&(J===location.toString().split("#")[0]||(L=$("base")[0])&&J===L.href)){F=this.hash;this.href=F}var H=$(this);var G=H.attr("tabId")||H.attr("id")||e+q++;H.attr("tabId",G);var E={tabId:G,title:H.text(),noHeader:true,onLoad:function(){D.onLoadComplete.call(C,G)},closed:true,lazyLoad:true,border:false};var K=$(">"+F,$(C))[0];if(!K&&F.indexOf("#")!=0){E.url=F}var I=new n(K||$("<div></div>")[0],E);B.push(I)});return B}function A(C){var E=$.data(C,"omtabs"),D=E.options,F=E.omtabs,B=E.items;if(typeof D.active=="number"){if(D.active<0){D.active=0}if(D.active>B.length-1){D.active=B.length-1}}if(D.width=="fit"){F.css("width","100%")}else{if(D.width!="auto"){F.css("width",D.width);F.children(":first").css("width",D.width)}}if(D.height=="fit"){F.css("height","100%")}else{if(D.height!="auto"){F.css("height",D.height)}}x(C);c(C)}function x(B){var E=$.data(B,"omtabs"),D=E.options,H=E.omtabs;var G=H.find(">div.om-tabs-headers");var C=G.find("ul li");C.addClass("om-state-default om-corner-top");C.each(function(J){var I=$(this).find("a:first");if($.browser.msie&&parseInt($.browser.version)==7){I.attr("hideFocus","true")}if(!I.hasClass("om-tabs-inner")){I.addClass("om-tabs-inner")}if(J===D.active||D.active===I.attr("tabId")){$(this).addClass("om-tabs-activated om-state-active");D.activeTabId=I.attr("tabId");D.active=J}I.css({width:D.tabWidth,height:D.tabHeight});if(D.closable===true||($.isArray(D.closable)&&-1!==$.inArray(J,D.closable))){$('<a class="om-icon om-icon-close"></a>').insertAfter(I)}});var F=C.find("a").height();C.parent().css({height:++F,"line-height":F+"px"});j(B)&&z(B)}function c(K){var F=$.data(K,"omtabs"),L=F.options,D=F.omtabs,H=F.items;var G=D.find(">div.om-tabs-panels");G.children().detach();var J=D.attr("style");if(J&&J.indexOf("height")!=-1){var C=D.innerHeight(),I=D.find(">div.om-tabs-headers").outerHeight();G.css("height",C-I)}if(!L.border){D.css("border-width","0")}var E=H.length;while(E--){var B=$(H[E]).omPanel("panel");B.prependTo(G)}}function t(C){var F=$.data(C,"omtabs"),D=F.options,B=F.items;var E=B.length;$(C).children().each(function(){if(!$(this).hasClass("om-tabs-headers")&&!$(this).hasClass("om-tabs-panels")){$(this).remove()}});if(!D.lazyLoad){$(B).omPanel("reload")}while(E--){var G=$(B[E]);if(E==D.active){G.omPanel("open")}else{G.omPanel("close")}}}function a(B){var F=$.data(B,"omtabs"),D=F.options,I=F.omtabs;I.find(">div.om-tabs-headers a.om-icon-close").bind("click.omtabs",function(K){var J=$(K.target).prev().attr("tabId");d(B,J);return false});var H=I.find(">div.om-tabs-headers a.om-tabs-inner");if(D.switchMode.indexOf("mouseover")!=-1){H.bind("mouseover.omtabs",function(){var J=$(this).attr("tabId"),K=$.data(B,"activateTimer");(typeof K!=="undefined")&&clearTimeout(K);K=setTimeout(function(){i(B,J);return false},500);$.data(B,"activateTimer",K)})}else{if(D.switchMode.indexOf("click")!=-1){H.bind("click.omtabs",function(){i(B,$(this).attr("tabId"))})}}H.bind("click.omtabs",function(){return false});if(D.autoPlay!=false){D.autoInterId=setInterval(function(){$(B).omTabs("activate","next")},D.interval)}if(D.switchMode.indexOf("mouseover")==-1){var C=I.find(">div.om-tabs-headers li");var E=function(K,J){if(J.is(":not(.om-state-disabled)")){J.addClass("om-state-"+K)}};var G=function(K,J){J.removeClass("om-state-"+K)};C.bind("mouseover.omtabs",function(){E("hover",$(this))});C.bind("mouseout.omtabs",function(){G("hover",$(this))})}I.find(">div.om-tabs-headers >span").bind("click.omtabs",function(N){if($(this).hasClass("om-tabs-scroll-disabled")){return false}var L=$(this).offset();var K=$(this).parent().find("ul");var J=K.children(":last");var O=J.outerWidth(true);var M=$(this).parent();if($(this).hasClass("om-tabs-scroll-left")){l(B,O,v(B))}if($(this).hasClass("om-tabs-scroll-right")){l(B,-O,v(B))}return false})}function g(B){var D=$.data(B,"omtabs"),C=D.options,F=D.omtabs;var E=F.find(">div.om-tabs-headers");E.children().unbind(".omtabs");E.find(">ul >li >a").unbind(".omtabs");if(C.autoInterId){clearInterval(C.autoInterId)}}function i(Q,C){var I=$.data(Q,"omtabs"),R=I.options,E=I.omtabs,N=I.items;var M=E.find(">div.om-tabs-headers ul");if(R.activeTabId==C||R.active==C){return false}C=C||0;var J,F=C;if(C=="next"){C=(R.active+1)%N.length}else{if(C=="prev"){C=(R.active-1)%N.length}}if(typeof C=="number"){F=s(Q,C)}else{if(typeof C=="string"){C=s(Q,C)}}if(R.onBeforeActivate.call(Q,C)==false){return false}J=M.find("li a[tabId="+F+"]");J.parent().siblings().removeClass("om-tabs-activated om-state-active");J.parent().addClass("om-tabs-activated om-state-active");R.activeTabId=F;R.active=C;var H=N.length;for(H=N.length;H--;H>=0){var L=$(N[H]);if(L.omPanel("options").tabId==F){L.omPanel("open")}}for(H=N.length;H--;H>=0){var L=$(N[H]);if(L.omPanel("options").tabId!=F){L.omPanel("close")}}if(j(Q)){M.stop(true,true);$(Q).clearQueue();var P=M.prev();var K=M.next();var B=J.parent().offset().left;var G=B+J.parent().outerWidth(true);var O=P.offset().left+P.outerWidth(true)+4-B;var D=K.offset().left-G;if(O>=0){l(Q,O,v(Q))}else{if(D<=0){l(Q,D,v(Q))}else{v(Q)()}}}R.onActivate.call(Q,C)}function s(C,E){var D=$.data(C,"omtabs").omtabs,B;if(typeof E=="number"){B=D.find(">div.om-tabs-headers li:nth-child("+ ++E+") a.om-tabs-inner").attr("tabId")}else{if(typeof E=="string"){D.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(F){if($(this).attr("tabId")==E){B=F;return false}})}}return B}function f(B){var C=$.data(B,"omtabs").options;return C.activeTabId}function u(L,C){var G=$.data(L,"omtabs"),M=G.options,E=G.omtabs,K=G.items;var J=E.find(">div.om-tabs-headers ul");var B=C.tabId?C.tabId:e+q++;C.index=C.index||"last";if(C.index=="last"||C.index>K.length-1){C.index=K.length}C.title=C.title||"New Title "+B;C.url=$.trim(C.url);C.content=$.trim(C.content);if(C.url){C.content=undefined}else{C.url=undefined;C.content=C.content||"New Content "+B}if(M.onBeforeAdd.call(L,C)==false){return false}var D=$('<li class="om-state-default om-corner-top"> </li>');var F=$('<a class="om-tabs-inner"></a>').html(C.title).attr({href:"#"+B,tabId:B}).css({width:M.tabWidth,height:M.tabHeight}).appendTo(D);if($.browser.msie&&parseInt($.browser.version)==7){F.attr("hideFocus","true")}if((C.closable===true)||(C.closable==undefined&&M.closable)){F.after('<a class="om-icon om-icon-close"></a>')}var I={tabId:B,noHeader:true,closed:true,lazyLoad:M.lazyLoad,onLoad:function(){M.onLoadComplete.call(L,B)},border:false};$.extend(I,C);var H=new n($("<div></div>")[0],I);if(C.index==K.length){K[C.index]=H;D.appendTo(J)}else{K.splice(C.index,0,H);J.children().eq(C.index).before(D)}j(L)&&z(L);c(L);g(L);a(L);M.onAdd.call(L,I);i(L,C.index)}function d(I,F){var E=$.data(I,"omtabs"),J=E.options,D=E.omtabs,H=E.items;var B=D.find(">div.om-tabs-headers");var G=D.find(">div.om-tabs-panels");var C=D.height();F=F||J.active;if(typeof F=="string"){F=s(I,F)}if(J.onBeforeClose.call(I,F)==false){return false}B.find("li").eq(F).remove();G.children().eq(F).remove();H.splice(F,1);if(G.children().length==0){G.css({height:C-B.outerHeight()})}J.onClose.call(I,F);if(H.length==0){J.active=-1;J.activeTabId=null;return}else{if(F==J.active){J.active=-1;!H[F]&&(F=0);i(I,F)}else{F<J.active&&J.active--;j(I)&&z(I)}}}function r(D){var G=$.data(D,"omtabs"),F=G.options,I=G.omtabs,C=G.items;var H=I.find(">div.om-tabs-headers");var E=I.find(">div.om-tabs-panels");var B=I.height();if(F.onBeforeCloseAll.call(D)==false){return false}H.find("li").remove();E.children().remove();C.splice(0);E.css({height:B-H.outerHeight()});F.active=-1;F.activeTabId=null;F.onCloseAll.call(D)}function j(J){var E=$.data(J,"omtabs"),K=E.options,D=E.omtabs;if(!K.scrollable){return false}var H=D.find(">div.om-tabs-headers ul");var G=0,I=false;if(H.hasClass("om-tabs-scrollable")){I=true;H.removeClass("om-tabs-scrollable")}G+=parseInt(H.css("paddingLeft"))+parseInt(H.css("paddingRight"));if(I==true){I=false;H.addClass("om-tabs-scrollable")}H.children().each(function(){G+=$(this).outerWidth(true)});if(G>H.parent().innerWidth()){if(!H.hasClass("om-tabs-scrollable")){var C=$("<span></span>").insertBefore(H).addClass("om-tabs-scroll-left");var F=$("<span></span>").insertAfter(H).addClass("om-tabs-scroll-right");var B=(H.height()-C.height())/2;C.add(F).css({marginTop:B,marginBottom:B});H.addClass("om-tabs-scrollable")}return true}else{H.siblings().remove();H.removeClass("om-tabs-scrollable");return false}}function v(B){return function(){z(B)}}function z(L){var F=$.data(L,"omtabs").omtabs;var E=F.find(">div.om-tabs-headers");var I=E.children("ul");var K=I.prev();var H=I.next();var J=I.children(":last");var B=E.offset().left,G=H.offset().left,C=I.offset().left,D=J.offset().left+J.outerWidth(true);if(C<B){K.removeClass("om-tabs-scroll-disabled")}else{K.addClass("om-tabs-scroll-disabled")}if(D>G){H.removeClass("om-tabs-scroll-disabled")}else{H.addClass("om-tabs-scroll-disabled")}}function l(C,I,F){var H=$.data(C,"omtabs").omtabs;var E=H.find(">div.om-tabs-headers ul");var B=E.children(":last");if(I==0){return}var D=I>0?E.prev().offset():E.next().offset();var G=function(K){if(I>0&&E.prev().hasClass(".om-tabs-scroll-disabled")||I<0&&E.next().hasClass(".om-tabs-scroll-disabled")){E.stop(true,true);$(C).clearQueue();return}var J=false;I=(I>0)?"+="+Math.min(D.left-E.offset().left,I):"-="+Math.min(B.offset().left+B.outerWidth(true)-D.left,Math.abs(I));$.data(C,"omtabs").isScrolling=true;E.animate({left:I+"px"},"normal","swing",function(){!!F&&F();$.data(C,"omtabs").isScrolling=false;K()})};$(C).queue(G);if($(C).queue().length==1&&!$.data(C,"omtabs").isScrolling){$(C).dequeue()}}function m(B){return $.data(B,"omtabs").items.length}function h(B){j(B)&&z(B)}function y(C,D){var B=$.data(C,"omtabs").items;var E,F;D.url=$.trim(D.url);D.content=$.trim(D.content);if(D.url){E=D.url;F=true}else{E=D.content;F=false}$(B[D.index]).omPanel("setDataSource",E,F)}function b(C,D){var B=$.data(C,"omtabs").items;$(B[D]).omPanel("reload")}var w={disable:function(){},enable:function(){},options:function(C){var B=$.data(this[0],"omtabs").options;if(C){$.extend(B,C)}return B},add:function(B){this.each(function(){u(this,B)})},close:function(B){this.each(function(){d(this,B)})},closeAll:function(){this.each(function(){r(this)})},activate:function(B){this.each(function(){i(this,B)})},getAlter:function(B){return s(this[0],B)},getActivated:function(){return f(this[0])},getLength:function(){return m(this[0])},setDataSource:function(B){if(!B.index||(!B.url&&!B.content)){return}this.each(function(){y(this,B)})},reload:function(B){this.each(function(){b(this,B)})},doLayout:function(){this.each(function(){h(this)})}};var o={width:"auto",height:"auto",border:true,tabWidth:80,tabHeight:25,disabled:false,scrollable:true,closable:false,position:"top",switchMode:"click",autoPlay:false,interval:1000,active:0,lazyLoad:false,onBeforeActivate:function(B){},onActivate:function(B){},onBeforeClose:function(B){},onClose:function(B){},onBeforeCloseAll:function(){},onCloseAll:function(){},onAdd:function(B){},onBeforeAdd:function(B){},onLoadComplete:function(B){}};$.fn.omTabs=function(B){if(B&&typeof(B)=="string"){if(w[B]){return w[B].apply(this,Array.prototype.slice.call(arguments,1))}return null}return this.each(function(){var D=$.data(this,"omtabs");var C;if(D){$.extend(D.options,B)}else{C=$.extend({},o,B);D=$.data(this,"omtabs",{options:C});$.data(this,"omtabs").omtabs=k(this);$.data(this,"omtabs").items=p(this)}A(this);t(this);a(this)})}})(jQuery);