(function(d,f){var b='<div class="om-messageBox om-widget om-widget-content om-corner-all" tabindex="-1"><div class="om-messageBox-titlebar om-widget-header om-helper-clearfix"><span class="om-messageBox-title"></span><a href="#" class="om-messageBox-titlebar-close"><span class="om-icon om-icon-closethick"></span></a></div><div class="om-messageBox-content om-widget-content"><table><tr vailgn="top"><td class="om-messageBox-imageTd"><div class="om-messageBox-image"/>&nbsp;</td><td class="om-message-content-html"></td></tr></table></div><div class="om-messageBox-buttonpane om-widget-content om-helper-clearfix"><div class="om-messageBox-buttonset"></div></div></div>';var c=function(){if(d.browser.msie&&d.browser.version<7){var i=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),h=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return(i<h)?d(window).height():i}else{return d(document).height()}};var a=function(){if(d.browser.msie){var h=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return(h<i)?d(window).width():h}else{return d(document).width()}};var e=function(k,h,i,j){if(k.hasClass("om-messageBox-waiting")){return}i?i(j):jQuery.noop();k.remove();h.remove()};var g=function(j){var o=j.onClose;var k=d(b).appendTo(document.body).css("z-index",9999).position({of:window,collision:"fit"}).draggable({containment:"document",handle:".om-messageBox-titlebar"}).hide().keydown(function(q){if(q.keyCode&&q.keyCode===d.ui.keyCode.ESCAPE){e(k,p,null,false);q.preventDefault()}});var p=d('<div class="om-widget-overlay"/>').appendTo(document.body).show().css({height:c(),width:a()});var i=k.find("span.om-messageBox-title").html(j.title).next().hover(function(){d(this).addClass("om-state-hover")},function(){d(this).removeClass("om-state-hover")}).focus(function(){d(this).addClass("om-state-focus")}).blur(function(){d(this).removeClass("om-state-focus")}).click(function(q){e(k,p,null,false);return false}).bind("mousedown mouseup",function(){d(this).toggleClass("om-state-mousedown")});k.find("div.om-messageBox-image").addClass("om-messageBox-image-"+j.type);var n=j.content;if(j.type=="prompt"){n=n||"";n+='<br/><input id="om-messageBox-prompt-input" type="text"/>'}k.find("td.om-message-content-html").html(n);var m=k.find("div.om-messageBox-buttonset");switch(j.type){case"confirm":m.html("<button>确定</button><button>取消</button>").children().first().click(function(){e(k,p,o,true)}).next().click(function(){e(k,p,o,false)});break;case"prompt":m.html("<button>确定</button><button>取消</button>").children().first().click(function(){var q=o?o(d("#om-messageBox-prompt-input").val()):jQuery.noop();if(q!==false){k.remove();p.remove()}}).next().click(function(){e(k,p,o,false)});break;case"waiting":k.addClass("om-messageBox-waiting");p.addClass("om-messageBox-waiting");i.hide();m.parent().hide();break;default:m.html("<button>确定</button>").children().first().click(function(){e(k,p,o,true)})}var l=d("button",m);if(d.fn.omButton){l.omButton()}k.show();var h=l.first()[0];h?h.focus():k.focus()};d.omMessageBox={alert:function(h){h=h||{};h.title=h.title||"提示";h.type=h.type||"alert";g(h)},confirm:function(h){h=h||{};h.title=h.title||"确认";h.type="confirm";g(h)},prompt:function(h){h=h||{};h.title=h.title||"请输入";h.type="prompt";g(h)},waiting:function(h){if(h==="close"){d(".om-messageBox-waiting").remove();return}h=h||{};h.title=h.title||"请等待";h.type="waiting";g(h)}}}(jQuery));